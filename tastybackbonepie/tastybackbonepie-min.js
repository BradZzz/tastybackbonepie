(function(c){var d='     		<ul>     			<li<% if (meta.previous == null) { %> class="disabled"<% } %>><a href="#" class="previous-<%= id %>">«</a></li>     			<% for (var i=0, len=Math.ceil(meta.total_count / meta.limit); i < len; i++) { %>     			    <li<% if (meta.offset / meta.limit == i) { %> class="active"<% } %>><a href="#" class="page-<%= id %>" data-offset="<%= meta.limit * i  %>"><%= i + 1 %></a></li>     			<% } %>     			<li<% if (meta.next == null) { %> class="disabled"<% } %>><a href="#" class="next-<%= id %>">»</a></li>     		</ul>     	',b='    		<div class="pagination pagination-small">     		'+d+'     		</div>             <div id="alert-<%= id %>"></div>     	    <table class="table table-bordered table-striped table-hover">                 <tr>                 	<% _.each(fields, function(field) { %>                     	<th>                     		<% if (field.order_by) { %>                     			<a href="#" class="orderBy-<%= id %>" data-order_by="<% if (order_by == field.order_by) { %><%= order_direction %><% } %><%= field.order_by %>">                     		<% } %>                     		<%= field.label %>                     		<% if (field.order_by) { %>                     			</a>                     		<% } %>                     	</th>                     <% }) %>                     <% _.each(additional_html_fields, function(additional_html_field) { %>                     	<th></th>                     <% }) %>                 </tr>                 <% _.each(entries, function(entry) { %>                     <tr>                     	<% _.each(fields, function(field) { %>                         	<td>                                 <% if (field.template) { %>                         		    <%= _.template(field.template, {entry: entry}) %>                                 <% } else { %>                                     <%= entry.get(field.key) %>                                 <% } %>                         	</td>                 		<% }) %>                 		<% _.each(additional_html_fields, function(additional_html_field) { %>                         	<td><%= additional_html_field %></td>                         <% }) %>                     </tr>                 <% }) %>     	    </table>     	    <div class="pagination pagination-small">     		'+d+"     		</div> 	    ",a='            <div class="alert alert-warning hidden"><%= message %></div>         ';c.fn.renderTastyBackbonePieTable=function(h){var f=this,g=h.tpl_pagination||b,e=h.template_error||a;f.collection=Backbone.Tastypie.Collection.extend({urlRoot:h.root_url,});f.view=Backbone.View.extend({el:c(f),al:"#alert-"+h.uid,entries:new f.collection(),parameters:h.default_filters||{},order_direction:"",getFetchOptions:function(){var i=this;return{success:function(j){var k=_.template(g,{id:h.uid,fields:h.fields,additional_html_fields:h.additional_html_fields,entries:j.models,meta:j.meta,order_by:i.parameters.order_by,order_direction:i.order_direction});i.$el.html(k);},error:function(k,j){var m=JSON.parse(j.responseText);var n=m.error||m.error_message||"Error";var l=_.template(e,{message:n});c(i.al).html(l);}};},events:{},render:function(){_.extend(this.entries.filters,this.parameters);this.entries.fetch(this.getFetchOptions());},loadPrevious:function(i){i.preventDefault();if(this.entries.meta.previous!=null){_.extend(this.entries.filters,this.parameters);this.entries.fetchPrevious(this.getFetchOptions());}},loadNext:function(i){i.preventDefault();if(this.entries.meta.next!=null){_.extend(this.entries.filters,this.parameters);this.entries.fetchNext(this.getFetchOptions());}},loadPage:function(i){i.preventDefault();_.extend(this.entries.filters,this.parameters);var j=this.getFetchOptions();j.offset=c(i.currentTarget).attr("data-offset");this.entries.fetchOffset(j);},orderBy:function(j){j.preventDefault();var i={order_by:c(j.currentTarget).attr("data-order_by")};_.extend(this.parameters,i);if(this.order_direction!="-"){this.order_direction="-";}this.render();},extendParameters:function(i){_.extend(this.parameters,i);},setParameter:function(i,j){this.parameters[i]=j;},removeParameter:function(i){delete this.parameters[i];delete this.entries.filters[i];}});f.view.prototype.events["click .previous-"+h.uid]="loadPrevious";f.view.prototype.events["click .next-"+h.uid]="loadNext";f.view.prototype.events["click .page-"+h.uid]="loadPage";f.view.prototype.events["click .orderBy-"+h.uid]="orderBy";f.table=new f.view();f.table.render();return f.table;};})(jQuery);(function(d,b,e){e.Tastypie={defaultLimit:20};e.Tastypie.Model=e.Model.extend({idAttribute:"resource_uri",url:function(){var f=a(this,"urlRoot")||a(this.collection,"urlRoot")||c();if(this.isNew()){return f;}return this.get("resource_uri");},_getId:function(){if(this.has("id")){return this.get("id");}return b.chain(this.get("resource_uri").split("/")).compact().last().value();}});e.Tastypie.Collection=e.Collection.extend({constructor:function(g,f){e.Collection.prototype.constructor.apply(this,arguments);this.meta={};this.filters={limit:e.Tastypie.defaultLimit,offset:0};if(f&&f.filters){b.extend(this.filters,f.filters);}},url:function(h){var f=this.urlRoot;if(h){var g=b.map(h,function(i){return i._getId();});f+="set/"+g.join(";")+"/";}return f+this._getQueryString();},parse:function(f){if(f&&f.meta){this.meta=f.meta;}return f&&f.objects;},fetchNext:function(f){f=f||{};f.add=true;this.filters.limit=this.meta.limit;this.filters.offset=this.meta.offset+this.meta.limit;if(this.filters.offset>this.meta.total_count){this.filters.offset=this.meta.total_count;}return this.fetch.call(this,f);},fetchPrevious:function(f){f=f||{};f.add=true;f.at=0;this.filters.limit=this.meta.limit;this.filters.offset=this.meta.offset-this.meta.limit;if(this.filters.offset<0){this.filters.defaultLimit+=this.filters.offset;this.filters.offset=0;}return this.fetch.call(this,f);},fetchOffset:function(f){f=f||{};f.offset=f.offset||this.meta.offset;this.filters.limit=this.meta.limit;this.filters.offset=f.offset;return this.fetch.call(this,f);},_getQueryString:function(){if(!this.filters){return"";}return"?"+d.param(this.filters);}});var a=function(f,g){if((f&&f[g])){return b.isFunction(f[g])?f[g]():f[g];}};var c=function(){throw new Error('A "url" property or function must be specified');};})(window.$,window._,window.Backbone);