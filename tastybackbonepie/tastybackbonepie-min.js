(function(c){var d='     		<ul>     			<li<% if (meta.previous == null) { %> class="disabled"<% } %>><a href="#" class="previous-<%= id %>">«</a></li>     			<% for (var i=0, len=Math.ceil(meta.total_count / meta.limit); i < len; i++) { %>     			    <li<% if (meta.offset / meta.limit == i) { %> class="active"<% } %>><a href="#" class="page-<%= id %>" data-offset="<%= meta.limit * i  %>"><%= i + 1 %></a></li>     			<% } %>     			<li<% if (meta.next == null) { %> class="disabled"<% } %>><a href="#" class="next-<%= id %>">»</a></li>     		</ul>     	',b='    		<div class="pagination pagination-small">     		'+d+'     		</div>             <div id="alert-<%= id %>"></div>     	    <table class="table table-bordered table-striped table-hover">                 <tr>                 	<% _.each(fields, function(field) { %>                     	<th>                     		<% if (field.order_by) { %>                     			<a href="#" class="orderBy-<%= id %>" data-order_by="<% if (order_by == field.order_by) { %><%= order_direction %><% } %><%= field.order_by %>">                     		<% } %>                     		<%= field.label %>                     		<% if (field.order_by) { %>                     			</a>                     		<% } %>                     	</th>                     <% }) %>                     <% _.each(additional_html_fields, function(additional_html_field) { %>                     	<th></th>                     <% }) %>                 </tr>                 <% _.each(entries, function(entry) { %>                     <tr>                     	<% _.each(fields, function(field) { %>                         	<td>                                 <% if (field.template) { %>                         		    <%= _.template(field.template, {entry: entry}) %>                                 <% } else { %>                                     <%= entry.get(field.key) %>                                 <% } %>                         	</td>                 		<% }) %>                 		<% _.each(additional_html_fields, function(additional_html_field) { %>                         	<td><%= additional_html_field %></td>                         <% }) %>                     </tr>                 <% }) %>     	    </table>     	    <div class="pagination pagination-small">     		'+d+"     		</div> 	    ",a='            <div class="alert alert-warning hidden"><%= message %></div>         ';c.fn.renderTastyBackbonePieTable=function(f){var e=this;e.collection=Backbone.Tastypie.Collection.extend({urlRoot:f.root_url,});e.view=Backbone.View.extend({el:c(e),al:"#alert-"+f.uid,entries:new e.collection(),parameters:f.default_filters||{},order_direction:"",getFetchOptions:function(){var g=this;return{success:function(h){var i=_.template(b,{id:f.uid,fields:f.fields,additional_html_fields:f.additional_html_fields,entries:h.models,meta:h.meta,order_by:g.parameters.order_by,order_direction:g.order_direction});g.$el.html(i);},error:function(i,h){var k=JSON.parse(h.responseText);var l=k.error||k.error_message||"Error";var j=_.template(a,{message:l});c(g.al).html(j);}};},events:{},render:function(){_.extend(this.entries.filters,this.parameters);this.entries.fetch(this.getFetchOptions());},loadPrevious:function(g){g.preventDefault();if(this.entries.meta.previous!=null){_.extend(this.entries.filters,this.parameters);this.entries.fetchPrevious(this.getFetchOptions());}},loadNext:function(g){g.preventDefault();if(this.entries.meta.next!=null){_.extend(this.entries.filters,this.parameters);this.entries.fetchNext(this.getFetchOptions());}},loadPage:function(g){g.preventDefault();_.extend(this.entries.filters,this.parameters);var h=this.getFetchOptions();h.offset=c(g.currentTarget).attr("data-offset");this.entries.fetchOffset(h);},orderBy:function(h){h.preventDefault();var g={order_by:c(h.currentTarget).attr("data-order_by")};_.extend(this.parameters,g);if(this.order_direction!="-"){this.order_direction="-";}this.render();},extend_parameters:function(g){_.extend(this.parameters,g);},remove_parameter:function(g){delete this.parameters[g];delete this.entries.filters[g];}});e.view.prototype.events["click .previous-"+f.uid]="loadPrevious";e.view.prototype.events["click .next-"+f.uid]="loadNext";e.view.prototype.events["click .page-"+f.uid]="loadPage";e.view.prototype.events["click .orderBy-"+f.uid]="orderBy";e.table=new e.view();e.table.render();return e.table;};})(jQuery);(function(d,b,e){e.Tastypie={defaultLimit:20};e.Tastypie.Model=e.Model.extend({idAttribute:"resource_uri",url:function(){var f=a(this,"urlRoot")||a(this.collection,"urlRoot")||c();if(this.isNew()){return f;}return this.get("resource_uri");},_getId:function(){if(this.has("id")){return this.get("id");}return b.chain(this.get("resource_uri").split("/")).compact().last().value();}});e.Tastypie.Collection=e.Collection.extend({constructor:function(g,f){e.Collection.prototype.constructor.apply(this,arguments);this.meta={};this.filters={limit:e.Tastypie.defaultLimit,offset:0};if(f&&f.filters){b.extend(this.filters,f.filters);}},url:function(h){var f=this.urlRoot;if(h){var g=b.map(h,function(i){return i._getId();});f+="set/"+g.join(";")+"/";}return f+this._getQueryString();},parse:function(f){if(f&&f.meta){this.meta=f.meta;}return f&&f.objects;},fetchNext:function(f){f=f||{};f.add=true;this.filters.limit=this.meta.limit;this.filters.offset=this.meta.offset+this.meta.limit;if(this.filters.offset>this.meta.total_count){this.filters.offset=this.meta.total_count;}return this.fetch.call(this,f);},fetchPrevious:function(f){f=f||{};f.add=true;f.at=0;this.filters.limit=this.meta.limit;this.filters.offset=this.meta.offset-this.meta.limit;if(this.filters.offset<0){this.filters.defaultLimit+=this.filters.offset;this.filters.offset=0;}return this.fetch.call(this,f);},fetchOffset:function(f){f=f||{};f.offset=f.offset||this.meta.offset;this.filters.limit=this.meta.limit;this.filters.offset=f.offset;return this.fetch.call(this,f);},_getQueryString:function(){if(!this.filters){return"";}return"?"+d.param(this.filters);}});var a=function(f,g){if((f&&f[g])){return b.isFunction(f[g])?f[g]():f[g];}};var c=function(){throw new Error('A "url" property or function must be specified');};})(window.$,window._,window.Backbone);